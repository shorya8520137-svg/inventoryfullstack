MANUAL JWT TOKEN FIX COMMANDS
============================

The issue is that the permissions routes are using a different JWT authentication middleware 
than the main auth system, causing token validation to fail.

STEP 1: Upload the fixed file to server
---------------------------------------
scp -i "C:\Users\Admin\awsconection.pem" routes/permissionsRoutes.js ubuntu@16.171.197.86:~/inventoryfullstack/routes/

STEP 2: SSH into server and restart
-----------------------------------
ssh -i "C:\Users\Admin\awsconection.pem" ubuntu@16.171.197.86

cd ~/inventoryfullstack

# Kill existing server
pkill -f "node server.js" || true
pkill -f "npm start" || true

# Wait a moment
sleep 2

# Start server
nohup node server.js > server.log 2>&1 &

# Check if server started
sleep 3
ps aux | grep node

# Exit SSH
exit

STEP 3: Test the fix
--------------------
node test-jwt-token-issue.js

WHAT WAS FIXED:
- Updated routes/permissionsRoutes.js to use the same JWT authentication middleware as the main auth system
- Removed duplicate authenticateToken and checkPermission middleware
- Now uses the consistent JWT_SECRET from middleware/auth.js

The /api/users endpoint should now work with valid JWT tokens.